!function(){"use strict";var e,n,t=mp.msg;function r(){return mp.get_property_native("speed")}function a(e){mp.set_property("speed",e)}!function(e){e.opts={fastSpeed:2,slowSpeed:.5,animation:!1},mp.options.read_options(e.opts,mp.get_script_name()),[e.opts.fastSpeed,e.opts.slowSpeed].forEach((function(e){(e>4||e<.25)&&t.warn("Warning: The playback speed is outside the typical range.","The audio will be muted if the speed is below 0.25 or above 4.0")}))}(e||(e={})),function(n){var t;function i(e){mp.osd_message("▶▶ x".concat(e.toFixed(1)),t.osdDuration)}function o(e,n){return function(t){i(t);var r=setInterval((function(){f.isChanged?e(t):clearInterval(r)}),n);return r}}!function(e){e.osdDuration=Math.max(.15,mp.get_property_native("osd-duration",1e3)/1e3),e.speedDelta=-.05,e.timerInterval=15,function(e){if(0===e)throw new Error("Invalid input: Delta must be a non-zero number")}(e.speedDelta)}(t||(t={}));var p,s,d,u=e.opts.animation?o((function(e){i(r())}),2*t.timerInterval):o(i,t.osdDuration),c=(p=t.speedDelta,s=t.timerInterval,t.speedDelta,d=function(e,n){return e<n},function(e,n){var t=setInterval((function(){var i=r()+p;d(i,e)?(clearInterval(t),a(e),void 0!==n&&n()):a(i)}),s)});n.make=function(e){!function(){if(f.prevSpeed===e)throw new Error("Invalid input: Target speed can't be the same as current speed.")}();var n=f.prevSpeed<e?[function(){f.isChanged=!0,a(e),f.timer=u(e)},function(){c(f.prevSpeed,(function(){f.isChanged=!1})),u(f.prevSpeed)}]:[function(){f.isChanged=!0,c(e),f.timer=u(e)},function(){a(f.prevSpeed),i(f.prevSpeed),f.isChanged=!1}],t=n[0],r=n[1];return function(e){if("down"===e.event)t();else{if("up"!==e.event)return;clearInterval(f.timer),r()}}};var f={prevSpeed:r(),isChanged:!1,timer:setTimeout((function(){}))};mp.observe_property("speed","number",(function(e,n){f.isChanged||(f.prevSpeed=n)}))}(n||(n={})),mp.add_key_binding("=","fastPlay",n.make(e.opts.fastSpeed),{complex:!0,repeatable:!1}),mp.add_key_binding("-","slowPlay",n.make(e.opts.slowSpeed),{complex:!0,repeatable:!1})}();