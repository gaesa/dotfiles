#!/usr/bin/zsh

# yt-dlp audio with search
function yta() {
    mpv --profile=audio --ytdl-format=bestaudio ytdl://ytsearch:"$*"
}

# replace diff with git diff
function diff() {
	git diff --no-index "$1" "$2"
	return 0
}

# Use ranger to switch directories and bind it to ctrl-o
#function lfcd() {
#    local tmp="$(mktemp -uq)"
#    trap 'rm -f $tmp >/dev/null 2>&1 && trap - HUP INT QUIT TERM PWR EXIT' HUP INT QUIT TERM PWR EXIT
#    lf -last-dir-path="$tmp" "$@"
#    if [ -f "$tmp" ]; then
#        local dir="$(cat "$tmp")"
#        [ -d "$dir" ] && [ "$dir" != "$(pwd)" ] && cd "$dir"
#    fi
#}
#bindkey -s '^N' '^ulfcd\n'

function rangercd() {
    local tmp="$(mktemp)"
    ranger --choosedir="$tmp" "$@"
    if [ -f "$tmp" ]; then
        local dir="$(cat "$tmp")"
        rm -f "$tmp"
        [ -d "$dir" ] && [ "$dir" != "$(pwd)" ] && cd "$dir"                                               
    fi
}
bindkey -s '^N' 'rangercd\n'
