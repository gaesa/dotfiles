#!/usr/bin/bash

# ls function
notls=false
if [[ "$1" == "ls" ]]; then 
	if [ -z "$2" ]; then
		ls -F --color=auto ~/.local/bin
	else
		ls -F --color=auto ~/.local/bin/"${@:2}"
	fi
else
	notls=true
fi

# cat function
notcat=false
if [[ "$1" == "cat" ]]; then
	cat ~/.local/bin/"$2"
else
	notcat=true
fi

# fd function
notfd=false
if [[ "$1" == "fd" ]]; then
	fd --type f "$2" ~/.local/bin/ -X printf '%s\n' {/}
else
	notfd=true
fi

# rm function
notrm=false
if [[ "$1" == "rm" ]]; then
	for i in "${@:2}"; do
		trash ~/.local/bin/"$i"
	done
else
	notrm=true
fi

# mv function
notmv=false
if [[ "$1" == "mv" ]]; then
	mv -i ~/.local/bin/"$2" ~/.local/bin/"$3"
else
	notmv=true
fi

# edit function
if [ "$notls" = true ] && [ "$notcat" = true ] && [ "$notfd" = true ] && [ "$notrm" = true ] && [ "$notmv" = true ]; then
	vim ~/.local/bin/"$@"
	wait
	for arg in "$@"; do
		if [ -f ~/.local/bin/"$arg" ]; then
			# if the file exists, then check its permission
			if [ $(stat -c %a ~/.local/bin/"$arg") != '744' ]; then 
				chmod u+x ~/.local/bin/"$arg"
			fi
		fi
	done
fi
