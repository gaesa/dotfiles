#!/usr/bin/env python3
from os import unlink, walk, listdir, rmdir
from os.path import isdir, islink, join, realpath
from sys import argv


def rm_empty_dirs(path):
    for root, dirs, _ in walk(path, topdown=False):
        for dir in dirs:
            folder_path = join(root, dir)
            if listdir(folder_path) == []:
                if islink(folder_path):
                    unlink(folder_path)
                else:
                    rmdir(folder_path)

    if listdir(path) == []:
        if islink(path):
            rmdir(realpath(path))
            unlink(path)
        else:
            rmdir(path)
    else:
        return


def main():
    if len(argv) < 2:
        print("No directory is given")
    else:
        paths = argv[1:]
        for path in paths:
            if isdir(path):
                rm_empty_dirs(path)
            else:
                pass


if __name__ == "__main__":
    main()
