#!/usr/bin/env python3
from subprocess import run
from sys import argv
from my_git import get_tracked_files, get_git_dir


def du(tracked_files: list[str], all: bool):
    if tracked_files == []:
        print("No tracked files found here")
    else:
        if all:
            run(["dust", *tracked_files, get_git_dir()])
        else:
            run(["dust", *tracked_files])


def main():
    if len(argv) > 1:
        if argv[1] in {"-a", "--all"}:
            all = True
            argv.pop(1)
        else:
            all = False
    else:
        all = False

    tracked_files = get_tracked_files(argv[1]) if len(argv) > 1 else get_tracked_files()
    du(tracked_files, all)


if __name__ == "__main__":
    main()
