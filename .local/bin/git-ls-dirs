#!/usr/bin/env python3
from my_utils.git import get_tracked_dirs
from my_utils.seq import for_each
from argparse import ArgumentParser


def parse_args() -> tuple[str, str]:
    parser = ArgumentParser(description="Get tracked directories")
    parser.add_argument(
        "path",
        type=str,
        default=".",
        nargs="?",
        help="The path to get tracked directories",
    )
    parser.add_argument(
        "--tree-ish",
        type=str,
        default="HEAD",
        help="The name of a tree-ish object (default: HEAD)",
    )
    args = parser.parse_args()
    return args.path, args.tree_ish


def main():
    path, tree_ish = parse_args()
    for_each(print, get_tracked_dirs(path, tree_ish))


if __name__ == "__main__":
    main()
